import{r as e,a as s,b as t}from"./vendor-BW1bv553.js";import{u as a,L as r,O as l,a as n,b as i,R as d,c,B as o}from"./router-DMj1pjk1.js";import{X as m,L as x,F as u,R as h,U as g,S as p,M as y,P as b,C as j,D as f,f as v,a as N,E as w,b as _,c as k,T as C,A as q,d as S,e as D,g as M,h as I,i as E,j as A,k as P,l as Q,B as $,m as L}from"./utils-JYz6qhjc.js";import{c as T}from"./supabase-DuJwztFu.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var R={exports:{}},F={},B=e,O=Symbol.for("react.element"),V=Symbol.for("react.fragment"),W=Object.prototype.hasOwnProperty,z=B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,J={key:!0,ref:!0,__self:!0,__source:!0};function G(e,s,t){var a,r={},l=null,n=null;for(a in void 0!==t&&(l=""+t),void 0!==s.key&&(l=""+s.key),void 0!==s.ref&&(n=s.ref),s)W.call(s,a)&&!J.hasOwnProperty(a)&&(r[a]=s[a]);if(e&&e.defaultProps)for(a in s=e.defaultProps)void 0===r[a]&&(r[a]=s[a]);return{$$typeof:O,type:e,key:l,ref:n,props:r,_owner:z.current}}F.Fragment=V,F.jsx=G,F.jsxs=G,R.exports=F;var H=R.exports,U={},Y=s;U.createRoot=Y.createRoot,U.hydrateRoot=Y.hydrateRoot;const Z=[{name:"Dashboard",href:"/",icon:x},{name:"Quotes",href:"/quotes",icon:u},{name:"Invoices",href:"/invoices",icon:h},{name:"Clients",href:"/clients",icon:g},{name:"Settings",href:"/settings",icon:p}];function X(){const s=a(),[t,n]=e.useState(!1);return H.jsxs("div",{className:"min-h-screen bg-gray-50",children:[H.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden "+(t?"block":"hidden"),children:[H.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>n(!1)}),H.jsxs("div",{className:"fixed inset-y-0 left-0 flex w-full max-w-xs flex-col bg-white shadow-xl",children:[H.jsxs("div",{className:"flex h-16 items-center justify-between px-4",children:[H.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"QuickQuote"}),H.jsx("button",{onClick:()=>n(!1),className:"rounded-md p-2 text-gray-400 hover:text-gray-500",children:H.jsx(m,{className:"h-6 w-6"})})]}),H.jsx("nav",{className:"flex-1 space-y-1 px-4 py-4",children:Z.map(e=>{const t=s.pathname===e.href||"/"!==e.href&&s.pathname.startsWith(e.href);return H.jsxs(r,{to:e.href,onClick:()=>n(!1),className:"flex items-center rounded-lg px-3 py-2 text-sm font-medium "+(t?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50"),children:[H.jsx(e.icon,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})})]})]}),H.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:H.jsxs("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-200",children:[H.jsx("div",{className:"flex h-16 items-center px-6",children:H.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"QuickQuote"})}),H.jsx("nav",{className:"flex-1 space-y-1 px-4 py-4",children:Z.map(e=>{const t=s.pathname===e.href||"/"!==e.href&&s.pathname.startsWith(e.href);return H.jsxs(r,{to:e.href,className:"flex items-center rounded-lg px-3 py-2 text-sm font-medium "+(t?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50"),children:[H.jsx(e.icon,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})})]})}),H.jsxs("div",{className:"lg:pl-64",children:[H.jsxs("div",{className:"sticky top-0 z-40 flex h-16 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm lg:hidden",children:[H.jsx("button",{onClick:()=>n(!0),className:"rounded-md p-2 text-gray-400 hover:text-gray-500",children:H.jsx(y,{className:"h-6 w-6"})}),H.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"QuickQuote"})]}),H.jsx("main",{className:"py-6",children:H.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:H.jsx(l,{})})})]})]})}const K=T("https://eecmystiookxudnevpth.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVlY215c3Rpb29reHVkbmV2cHRoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk1MTIwNDMsImV4cCI6MjA2NTA4ODA0M30.rjsxPByKI7p4QWlMZHN7v_YaC3BGOeQ4xCOJn-7TdWA");function ee(){const[s,t]=e.useState({totalQuotes:0,totalInvoices:0,pendingQuotes:0,totalRevenue:0}),[a,l]=e.useState([]),[n,i]=e.useState(!0);e.useEffect(()=>{d()},[]);const d=async()=>{try{const[e,s]=await Promise.all([K.from("quotes").select("status, amount"),K.from("invoices").select("status, amount")]),a=e.data||[],r=s.data||[],n={totalQuotes:a.length,totalInvoices:r.length,pendingQuotes:a.filter(e=>"pending"===e.status).length,totalRevenue:r.filter(e=>"paid"===e.status).reduce((e,s)=>e+(s.amount||0),0)};t(n);const{data:i}=await K.from("quotes").select("id, client_name, amount, status, created_at").order("created_at",{ascending:!1}).limit(5),{data:d}=await K.from("invoices").select("id, client_name, amount, status, created_at").order("created_at",{ascending:!1}).limit(5),c=[...(i||[]).map(e=>({...e,type:"quote"})),...(d||[]).map(e=>({...e,type:"invoice"}))].sort((e,s)=>new Date(s.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,10);l(c)}catch(e){console.error("Error loading dashboard data:",e)}finally{i(!1)}};return n?H.jsx("div",{className:"animate-pulse",children:H.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((e,s)=>H.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[H.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),H.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2"})]},s))})}):H.jsxs("div",{className:"space-y-6",children:[H.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[H.jsxs("div",{children:[H.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),H.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Welcome back! Here's what's happening with your business."})]}),H.jsx("div",{className:"mt-4 flex space-x-3 sm:mt-0",children:H.jsxs(r,{to:"/quotes/new",className:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700",children:[H.jsx(b,{className:"mr-2 h-4 w-4"}),"New Quote"]})})]}),H.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[H.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:H.jsxs("div",{className:"flex items-center",children:[H.jsx("div",{className:"flex-shrink-0",children:H.jsx(u,{className:"h-8 w-8 text-blue-600"})}),H.jsxs("div",{className:"ml-4",children:[H.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Quotes"}),H.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalQuotes})]})]})}),H.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:H.jsxs("div",{className:"flex items-center",children:[H.jsx("div",{className:"flex-shrink-0",children:H.jsx(h,{className:"h-8 w-8 text-green-600"})}),H.jsxs("div",{className:"ml-4",children:[H.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Invoices"}),H.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalInvoices})]})]})}),H.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:H.jsxs("div",{className:"flex items-center",children:[H.jsx("div",{className:"flex-shrink-0",children:H.jsx(j,{className:"h-8 w-8 text-yellow-600"})}),H.jsxs("div",{className:"ml-4",children:[H.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pending Quotes"}),H.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.pendingQuotes})]})]})}),H.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:H.jsxs("div",{className:"flex items-center",children:[H.jsx("div",{className:"flex-shrink-0",children:H.jsx(f,{className:"h-8 w-8 text-green-600"})}),H.jsxs("div",{className:"ml-4",children:[H.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Revenue"}),H.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",s.totalRevenue.toLocaleString()]})]})]})})]}),H.jsxs("div",{className:"bg-white rounded-lg shadow",children:[H.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:H.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Recent Activity"})}),H.jsx("div",{className:"divide-y divide-gray-200",children:0===a.length?H.jsxs("div",{className:"px-6 py-8 text-center",children:[H.jsx(u,{className:"mx-auto h-12 w-12 text-gray-400"}),H.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No activity yet"}),H.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating your first quote."}),H.jsx("div",{className:"mt-6",children:H.jsxs(r,{to:"/quotes/new",className:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700",children:[H.jsx(b,{className:"mr-2 h-4 w-4"}),"Create Quote"]})})]}):a.map(e=>{var s;return H.jsx("div",{className:"px-6 py-4",children:H.jsxs("div",{className:"flex items-center justify-between",children:[H.jsxs("div",{className:"flex items-center",children:[H.jsx("div",{className:"flex-shrink-0",children:"quote"===e.type?H.jsx(u,{className:"h-5 w-5 text-blue-600"}):H.jsx(h,{className:"h-5 w-5 text-green-600"})}),H.jsxs("div",{className:"ml-3",children:[H.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["quote"===e.type?"Quote":"Invoice"," for ",e.client_name]}),H.jsxs("p",{className:"text-sm text-gray-500",children:[v(new Date(e.created_at),"MMM d, yyyy")," • $",(null==(s=e.amount)?void 0:s.toLocaleString())||0]})]})]}),H.jsx("span",{className:"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium "+("approved"===e.status||"paid"===e.status?"bg-green-100 text-green-800":"declined"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status})]})},`${e.type}-${e.id}`)})})]})]})}function se(){const[s,t]=e.useState([]),[a,l]=e.useState(!0),[n,i]=e.useState(""),[d,c]=e.useState("all");e.useEffect(()=>{o()},[]);const o=async()=>{try{const{data:e,error:s}=await K.from("quotes").select("*").order("created_at",{ascending:!1});if(s)throw s;t(e||[])}catch(e){console.error("Error loading quotes:",e)}finally{l(!1)}},m=s.filter(e=>{const s=e.client_name.toLowerCase().includes(n.toLowerCase())||e.service_description.toLowerCase().includes(n.toLowerCase()),t="all"===d||e.status===d;return s&&t});return a?H.jsxs("div",{className:"animate-pulse",children:[H.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),H.jsx("div",{className:"space-y-4",children:[...Array(5)].map((e,s)=>H.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[H.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),H.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]},s))})]}):H.jsxs("div",{className:"space-y-6",children:[H.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[H.jsxs("div",{children:[H.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Quotes"}),H.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage and track all your quotes in one place."})]}),H.jsx("div",{className:"mt-4 sm:mt-0",children:H.jsxs(r,{to:"/quotes/new",className:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700",children:[H.jsx(b,{className:"mr-2 h-4 w-4"}),"New Quote"]})})]}),H.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[H.jsxs("div",{className:"relative flex-1",children:[H.jsx(N,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),H.jsx("input",{type:"text",placeholder:"Search quotes...",value:n,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),H.jsxs("select",{value:d,onChange:e=>c(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[H.jsx("option",{value:"all",children:"All Status"}),H.jsx("option",{value:"pending",children:"Pending"}),H.jsx("option",{value:"approved",children:"Approved"}),H.jsx("option",{value:"declined",children:"Declined"})]})]}),H.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:0===m.length?H.jsxs("div",{className:"px-6 py-12 text-center",children:[H.jsx("div",{className:"mx-auto h-12 w-12 text-gray-400",children:H.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),H.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No quotes found"}),H.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n||"all"!==d?"Try adjusting your search or filter criteria.":"Get started by creating your first quote."}),!n&&"all"===d&&H.jsx("div",{className:"mt-6",children:H.jsxs(r,{to:"/quotes/new",className:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700",children:[H.jsx(b,{className:"mr-2 h-4 w-4"}),"Create Quote"]})})]}):H.jsx("div",{className:"divide-y divide-gray-200",children:m.map(e=>H.jsx("div",{className:"px-6 py-4",children:H.jsxs("div",{className:"flex items-center justify-between",children:[H.jsxs("div",{className:"flex-1 min-w-0",children:[H.jsxs("div",{className:"flex items-center justify-between",children:[H.jsx("h3",{className:"text-lg font-medium text-gray-900 truncate",children:e.client_name}),H.jsx("span",{className:"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium "+("approved"===e.status?"bg-green-100 text-green-800":"declined"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status})]}),H.jsx("p",{className:"mt-1 text-sm text-gray-500 truncate",children:e.service_description}),H.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[H.jsxs("span",{className:"font-medium text-gray-900",children:["$",e.amount.toLocaleString()]}),H.jsx("span",{className:"mx-2",children:"•"}),H.jsx("span",{children:v(new Date(e.created_at),"MMM d, yyyy")}),e.due_date&&H.jsxs(H.Fragment,{children:[H.jsx("span",{className:"mx-2",children:"•"}),H.jsxs("span",{children:["Due ",v(new Date(e.due_date),"MMM d, yyyy")]})]})]})]}),H.jsxs("div",{className:"ml-4 flex items-center space-x-2",children:[H.jsx(r,{to:`/quotes/${e.id}`,className:"p-2 text-gray-400 hover:text-gray-500",title:"View",children:H.jsx(w,{className:"h-4 w-4"})}),H.jsx(r,{to:`/quotes/${e.id}/edit`,className:"p-2 text-gray-400 hover:text-gray-500",title:"Edit",children:H.jsx(_,{className:"h-4 w-4"})}),H.jsx("button",{onClick:()=>(async e=>{const s=`${window.location.origin}/quote/${e}`;try{await navigator.clipboard.writeText(s),alert("Quote link copied to clipboard!")}catch(t){prompt("Copy this link:",s)}})(e.id),className:"p-2 text-gray-400 hover:text-gray-500",title:"Share",children:H.jsx(k,{className:"h-4 w-4"})}),H.jsx("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this quote?"))try{const{error:a}=await K.from("quotes").delete().eq("id",e);if(a)throw a;t(s.filter(s=>s.id!==e))}catch(a){console.error("Error deleting quote:",a)}})(e.id),className:"p-2 text-gray-400 hover:text-red-500",title:"Delete",children:H.jsx(C,{className:"h-4 w-4"})})]})]})},e.id))})})]})}function te(){const s=n(),[t,a]=e.useState(!1),[r,l]=e.useState({client_name:"",client_email:"",client_phone:"",client_address:"",service_description:"",amount:"",due_date:"",notes:""}),i=e=>{l(s=>({...s,[e.target.name]:e.target.value}))};return H.jsxs("div",{className:"space-y-6",children:[H.jsxs("div",{className:"flex items-center",children:[H.jsx("button",{onClick:()=>s("/quotes"),className:"mr-4 p-2 text-gray-400 hover:text-gray-500",children:H.jsx(q,{className:"h-5 w-5"})}),H.jsxs("div",{children:[H.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Quote"}),H.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Fill out the details below to create a new quote."})]})]}),H.jsxs("form",{onSubmit:async e=>{e.preventDefault(),a(!0);try{const{data:e,error:t}=await K.from("quotes").insert([{client_name:r.client_name,client_email:r.client_email,client_phone:r.client_phone,client_address:r.client_address,service_description:r.service_description,amount:parseFloat(r.amount),due_date:r.due_date||null,notes:r.notes,status:"pending"}]).select().single();if(t)throw t;s(`/quotes/${e.id}`)}catch(t){console.error("Error creating quote:",t),alert("Failed to create quote. Please try again.")}finally{a(!1)}},className:"space-y-6",children:[H.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[H.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Client Information"}),H.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Name *"}),H.jsx("input",{type:"text",name:"client_name",value:r.client_name,onChange:i,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),H.jsx("input",{type:"email",name:"client_email",value:r.client_email,onChange:i,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),H.jsx("input",{type:"tel",name:"client_phone",value:r.client_phone,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),H.jsx("input",{type:"text",name:"client_address",value:r.client_address,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),H.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[H.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quote Details"}),H.jsxs("div",{className:"space-y-6",children:[H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Description *"}),H.jsx("textarea",{name:"service_description",value:r.service_description,onChange:i,required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe the services you'll provide..."})]}),H.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount *"}),H.jsxs("div",{className:"relative",children:[H.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),H.jsx("input",{type:"number",name:"amount",value:r.amount,onChange:i,required:!0,min:"0",step:"0.01",className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),H.jsx("input",{type:"date",name:"due_date",value:r.due_date,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Notes"}),H.jsx("textarea",{name:"notes",value:r.notes,onChange:i,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Any additional terms or conditions..."})]})]})]}),H.jsxs("div",{className:"flex justify-end space-x-3",children:[H.jsx("button",{type:"button",onClick:()=>s("/quotes"),className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),H.jsxs("button",{type:"submit",disabled:t,className:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-lg text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50",children:[H.jsx(S,{className:"mr-2 h-4 w-4"}),t?"Creating...":"Create Quote"]})]})]})]})}function ae(){const s=n(),{id:t}=i(),[a,r]=e.useState(!1),[l,d]=e.useState(!0),[c,o]=e.useState({client_name:"",client_email:"",client_phone:"",client_address:"",service_description:"",amount:"",due_date:"",notes:""});e.useEffect(()=>{t&&m()},[t]);const m=async()=>{var e;try{const{data:s,error:a}=await K.from("quotes").select("*").eq("id",t).single();if(a)throw a;o({client_name:s.client_name||"",client_email:s.client_email||"",client_phone:s.client_phone||"",client_address:s.client_address||"",service_description:s.service_description||"",amount:(null==(e=s.amount)?void 0:e.toString())||"",due_date:s.due_date||"",notes:s.notes||""})}catch(a){console.error("Error loading quote:",a),s("/quotes")}finally{d(!1)}},x=e=>{o(s=>({...s,[e.target.name]:e.target.value}))};return l?H.jsxs("div",{className:"animate-pulse",children:[H.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),H.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:H.jsx("div",{className:"space-y-4",children:[...Array(6)].map((e,s)=>H.jsxs("div",{children:[H.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),H.jsx("div",{className:"h-10 bg-gray-200 rounded"})]},s))})})]}):H.jsxs("div",{className:"space-y-6",children:[H.jsxs("div",{className:"flex items-center",children:[H.jsx("button",{onClick:()=>s(`/quotes/${t}`),className:"mr-4 p-2 text-gray-400 hover:text-gray-500",children:H.jsx(q,{className:"h-5 w-5"})}),H.jsxs("div",{children:[H.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Quote"}),H.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Update the quote details below."})]})]}),H.jsxs("form",{onSubmit:async e=>{e.preventDefault(),r(!0);try{const{error:e}=await K.from("quotes").update({client_name:c.client_name,client_email:c.client_email,client_phone:c.client_phone,client_address:c.client_address,service_description:c.service_description,amount:parseFloat(c.amount),due_date:c.due_date||null,notes:c.notes}).eq("id",t);if(e)throw e;s(`/quotes/${t}`)}catch(a){console.error("Error updating quote:",a),alert("Failed to update quote. Please try again.")}finally{r(!1)}},className:"space-y-6",children:[H.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[H.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Client Information"}),H.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Name *"}),H.jsx("input",{type:"text",name:"client_name",value:c.client_name,onChange:x,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),H.jsx("input",{type:"email",name:"client_email",value:c.client_email,onChange:x,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),H.jsx("input",{type:"tel",name:"client_phone",value:c.client_phone,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),H.jsx("input",{type:"text",name:"client_address",value:c.client_address,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),H.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[H.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quote Details"}),H.jsxs("div",{className:"space-y-6",children:[H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Description *"}),H.jsx("textarea",{name:"service_description",value:c.service_description,onChange:x,required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe the services you'll provide..."})]}),H.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount *"}),H.jsxs("div",{className:"relative",children:[H.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),H.jsx("input",{type:"number",name:"amount",value:c.amount,onChange:x,required:!0,min:"0",step:"0.01",className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),H.jsx("input",{type:"date",name:"due_date",value:c.due_date,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Notes"}),H.jsx("textarea",{name:"notes",value:c.notes,onChange:x,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Any additional terms or conditions..."})]})]})]}),H.jsxs("div",{className:"flex justify-end space-x-3",children:[H.jsx("button",{type:"button",onClick:()=>s(`/quotes/${t}`),className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),H.jsxs("button",{type:"submit",disabled:a,className:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-lg text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50",children:[H.jsx(S,{className:"mr-2 h-4 w-4"}),a?"Saving...":"Save Changes"]})]})]})]})}function re(){const s=n(),{id:t}=i(),[a,l]=e.useState(null),[d,c]=e.useState(!0);e.useEffect(()=>{t&&o()},[t]);const o=async()=>{try{const{data:e,error:s}=await K.from("quotes").select("*").eq("id",t).single();if(s)throw s;l(e)}catch(e){console.error("Error loading quote:",e),s("/quotes")}finally{c(!1)}};return d?H.jsxs("div",{className:"animate-pulse",children:[H.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),H.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:H.jsx("div",{className:"space-y-4",children:[...Array(8)].map((e,s)=>H.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"},s))})})]}):a?H.jsxs("div",{className:"space-y-6",children:[H.jsxs("div",{className:"flex items-center justify-between",children:[H.jsxs("div",{className:"flex items-center",children:[H.jsx("button",{onClick:()=>s("/quotes"),className:"mr-4 p-2 text-gray-400 hover:text-gray-500",children:H.jsx(q,{className:"h-5 w-5"})}),H.jsxs("div",{children:[H.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Quote Details"}),H.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Created ",v(new Date(a.created_at),"MMMM d, yyyy")]})]})]}),H.jsxs("div",{className:"flex items-center space-x-3",children:[H.jsx("span",{className:"inline-flex items-center rounded-full px-3 py-1 text-sm font-medium "+("approved"===a.status?"bg-green-100 text-green-800":"declined"===a.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:a.status}),H.jsxs(r,{to:`/quotes/${a.id}/edit`,className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50",children:[H.jsx(_,{className:"mr-2 h-4 w-4"}),"Edit"]}),H.jsxs("button",{onClick:async()=>{if(!a)return;const e=`${window.location.origin}/quote/${a.id}`;try{await navigator.clipboard.writeText(e),alert("Quote link copied to clipboard!")}catch(s){prompt("Copy this link:",e)}},className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50",children:[H.jsx(k,{className:"mr-2 h-4 w-4"}),"Share"]}),"approved"===a.status&&H.jsxs("button",{onClick:async()=>{if(a&&"approved"===a.status)try{const{data:e,error:t}=await K.from("invoices").insert([{quote_id:a.id,client_name:a.client_name,client_email:a.client_email,client_phone:a.client_phone,client_address:a.client_address,service_description:a.service_description,amount:a.amount,due_date:a.due_date,notes:a.notes,status:"pending"}]).select().single();if(t)throw t;s(`/invoices/${e.id}`)}catch(e){console.error("Error converting to invoice:",e),alert("Failed to convert to invoice. Please try again.")}},className:"inline-flex items-center px-3 py-2 bg-green-600 border border-transparent rounded-lg text-sm font-medium text-white hover:bg-green-700",children:[H.jsx(h,{className:"mr-2 h-4 w-4"}),"Convert to Invoice"]})]})]}),H.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[H.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:H.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Quote Information"})}),H.jsxs("div",{className:"px-6 py-4 space-y-6",children:[H.jsxs("div",{children:[H.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3",children:"Client Information"}),H.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[H.jsxs("div",{children:[H.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Name"}),H.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:a.client_name})]}),H.jsxs("div",{children:[H.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Email"}),H.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:a.client_email})]}),a.client_phone&&H.jsxs("div",{children:[H.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Phone"}),H.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:a.client_phone})]}),a.client_address&&H.jsxs("div",{children:[H.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Address"}),H.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:a.client_address})]})]})]}),H.jsxs("div",{children:[H.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3",children:"Service Details"}),H.jsxs("div",{className:"space-y-4",children:[H.jsxs("div",{children:[H.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Description"}),H.jsx("dd",{className:"mt-1 text-sm text-gray-900 whitespace-pre-wrap",children:a.service_description})]}),H.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[H.jsxs("div",{children:[H.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Amount"}),H.jsxs("dd",{className:"mt-1 text-2xl font-bold text-gray-900",children:["$",a.amount.toLocaleString()]})]}),a.due_date&&H.jsxs("div",{children:[H.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Due Date"}),H.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:v(new Date(a.due_date),"MMMM d, yyyy")})]})]}),a.notes&&H.jsxs("div",{children:[H.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Additional Notes"}),H.jsx("dd",{className:"mt-1 text-sm text-gray-900 whitespace-pre-wrap",children:a.notes})]})]})]})]})]})]}):H.jsxs("div",{className:"text-center py-12",children:[H.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Quote not found"}),H.jsx("p",{className:"mt-2 text-gray-600",children:"The quote you're looking for doesn't exist."}),H.jsx(r,{to:"/quotes",className:"mt-4 inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Back to Quotes"})]})}function le(){const{id:s}=i(),[t,a]=e.useState(null),[r,l]=e.useState(!0),[n,d]=e.useState(!1);e.useEffect(()=>{s&&c()},[s]);const c=async()=>{try{const{data:e,error:t}=await K.from("quotes").select("*").eq("id",s).single();if(t)throw t;a(e)}catch(e){console.error("Error loading quote:",e)}finally{l(!1)}},o=async e=>{if(t){d(!0);try{const{error:s}=await K.from("quotes").update({status:e}).eq("id",t.id);if(s)throw s;a({...t,status:e})}catch(s){console.error("Error updating quote:",s),alert("Failed to update quote status. Please try again.")}finally{d(!1)}}};return r?H.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:H.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):t?H.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:H.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[H.jsxs("div",{className:"text-center mb-8",children:[H.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Quote"}),H.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Created ",v(new Date(t.created_at),"MMMM d, yyyy")]})]}),H.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:["pending"!==t.status&&H.jsx("div",{className:"px-6 py-3 "+("approved"===t.status?"bg-green-50 border-b border-green-200":"bg-red-50 border-b border-red-200"),children:H.jsxs("div",{className:"flex items-center",children:["approved"===t.status?H.jsx(D,{className:"h-5 w-5 text-green-600 mr-2"}):H.jsx(m,{className:"h-5 w-5 text-red-600 mr-2"}),H.jsxs("span",{className:"text-sm font-medium "+("approved"===t.status?"text-green-800":"text-red-800"),children:["This quote has been ",t.status]})]})}),H.jsxs("div",{className:"px-6 py-8",children:[H.jsxs("div",{className:"mb-8",children:[H.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quote For:"}),H.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:H.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[H.jsxs("div",{children:[H.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Name:"}),H.jsx("p",{className:"text-sm text-gray-900",children:t.client_name})]}),H.jsxs("div",{children:[H.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Email:"}),H.jsx("p",{className:"text-sm text-gray-900",children:t.client_email})]}),t.client_phone&&H.jsxs("div",{children:[H.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Phone:"}),H.jsx("p",{className:"text-sm text-gray-900",children:t.client_phone})]}),t.client_address&&H.jsxs("div",{children:[H.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Address:"}),H.jsx("p",{className:"text-sm text-gray-900",children:t.client_address})]})]})})]}),H.jsxs("div",{className:"mb-8",children:[H.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Service Description:"}),H.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:H.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:t.service_description})})]}),H.jsx("div",{className:"mb-8",children:H.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 text-center",children:[H.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Total Amount:"}),H.jsxs("p",{className:"text-4xl font-bold text-blue-600",children:["$",t.amount.toLocaleString()]}),t.due_date&&H.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Due: ",v(new Date(t.due_date),"MMMM d, yyyy")]})]})}),t.notes&&H.jsxs("div",{className:"mb-8",children:[H.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Notes:"}),H.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:H.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:t.notes})})]}),"pending"===t.status&&H.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[H.jsxs("button",{onClick:()=>o("approved"),disabled:n,className:"flex-1 inline-flex items-center justify-center px-6 py-3 bg-green-600 border border-transparent rounded-lg text-base font-medium text-white hover:bg-green-700 disabled:opacity-50",children:[H.jsx(D,{className:"mr-2 h-5 w-5"}),n?"Processing...":"Approve Quote"]}),H.jsxs("button",{onClick:()=>o("declined"),disabled:n,className:"flex-1 inline-flex items-center justify-center px-6 py-3 bg-red-600 border border-transparent rounded-lg text-base font-medium text-white hover:bg-red-700 disabled:opacity-50",children:[H.jsx(m,{className:"mr-2 h-5 w-5"}),n?"Processing...":"Decline Quote"]})]})]})]}),H.jsx("div",{className:"mt-8 text-center text-sm text-gray-500",children:H.jsx("p",{children:"Powered by QuickQuote"})})]})}):H.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:H.jsxs("div",{className:"text-center",children:[H.jsx(u,{className:"mx-auto h-12 w-12 text-gray-400"}),H.jsx("h2",{className:"mt-2 text-lg font-medium text-gray-900",children:"Quote not found"}),H.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"The quote you're looking for doesn't exist or has been removed."})]})})}function ne(){const[s,t]=e.useState([]),[a,l]=e.useState(!0),[n,i]=e.useState(""),[d,c]=e.useState("all");e.useEffect(()=>{o()},[]);const o=async()=>{try{const{data:e,error:s}=await K.from("invoices").select("*").order("created_at",{ascending:!1});if(s)throw s;t(e||[])}catch(e){console.error("Error loading invoices:",e)}finally{l(!1)}},m=s.filter(e=>{const s=e.client_name.toLowerCase().includes(n.toLowerCase())||e.service_description.toLowerCase().includes(n.toLowerCase()),t="all"===d||e.status===d;return s&&t});return a?H.jsxs("div",{className:"animate-pulse",children:[H.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),H.jsx("div",{className:"space-y-4",children:[...Array(5)].map((e,s)=>H.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[H.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),H.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]},s))})]}):H.jsxs("div",{className:"space-y-6",children:[H.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[H.jsxs("div",{children:[H.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Invoices"}),H.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage and track all your invoices in one place."})]}),H.jsx("div",{className:"mt-4 sm:mt-0",children:H.jsxs(r,{to:"/invoices/new",className:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700",children:[H.jsx(b,{className:"mr-2 h-4 w-4"}),"New Invoice"]})})]}),H.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[H.jsxs("div",{className:"relative flex-1",children:[H.jsx(N,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),H.jsx("input",{type:"text",placeholder:"Search invoices...",value:n,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),H.jsxs("select",{value:d,onChange:e=>c(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[H.jsx("option",{value:"all",children:"All Status"}),H.jsx("option",{value:"pending",children:"Pending"}),H.jsx("option",{value:"paid",children:"Paid"}),H.jsx("option",{value:"overdue",children:"Overdue"})]})]}),H.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:0===m.length?H.jsxs("div",{className:"px-6 py-12 text-center",children:[H.jsx("div",{className:"mx-auto h-12 w-12 text-gray-400",children:H.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),H.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No invoices found"}),H.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n||"all"!==d?"Try adjusting your search or filter criteria.":"Get started by creating your first invoice."}),!n&&"all"===d&&H.jsx("div",{className:"mt-6",children:H.jsxs(r,{to:"/invoices/new",className:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700",children:[H.jsx(b,{className:"mr-2 h-4 w-4"}),"Create Invoice"]})})]}):H.jsx("div",{className:"divide-y divide-gray-200",children:m.map(e=>H.jsx("div",{className:"px-6 py-4",children:H.jsxs("div",{className:"flex items-center justify-between",children:[H.jsxs("div",{className:"flex-1 min-w-0",children:[H.jsxs("div",{className:"flex items-center justify-between",children:[H.jsx("h3",{className:"text-lg font-medium text-gray-900 truncate",children:e.client_name}),H.jsx("span",{className:"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium "+("paid"===e.status?"bg-green-100 text-green-800":"overdue"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status})]}),H.jsx("p",{className:"mt-1 text-sm text-gray-500 truncate",children:e.service_description}),H.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[H.jsxs("span",{className:"font-medium text-gray-900",children:["$",e.amount.toLocaleString()]}),H.jsx("span",{className:"mx-2",children:"•"}),H.jsx("span",{children:v(new Date(e.created_at),"MMM d, yyyy")}),e.due_date&&H.jsxs(H.Fragment,{children:[H.jsx("span",{className:"mx-2",children:"•"}),H.jsxs("span",{children:["Due ",v(new Date(e.due_date),"MMM d, yyyy")]})]})]})]}),H.jsxs("div",{className:"ml-4 flex items-center space-x-2",children:[H.jsx(r,{to:`/invoices/${e.id}`,className:"p-2 text-gray-400 hover:text-gray-500",title:"View",children:H.jsx(w,{className:"h-4 w-4"})}),H.jsx(r,{to:`/invoices/${e.id}/edit`,className:"p-2 text-gray-400 hover:text-gray-500",title:"Edit",children:H.jsx(_,{className:"h-4 w-4"})}),H.jsx("button",{onClick:()=>(async e=>{const s=`${window.location.origin}/invoice/${e}`;try{await navigator.clipboard.writeText(s),alert("Invoice link copied to clipboard!")}catch(t){prompt("Copy this link:",s)}})(e.id),className:"p-2 text-gray-400 hover:text-gray-500",title:"Share",children:H.jsx(k,{className:"h-4 w-4"})}),H.jsx("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this invoice?"))try{const{error:a}=await K.from("invoices").delete().eq("id",e);if(a)throw a;t(s.filter(s=>s.id!==e))}catch(a){console.error("Error deleting invoice:",a)}})(e.id),className:"p-2 text-gray-400 hover:text-red-500",title:"Delete",children:H.jsx(C,{className:"h-4 w-4"})})]})]})},e.id))})})]})}function ie(){const s=n(),[t,a]=e.useState(!1),[r,l]=e.useState({client_name:"",client_email:"",client_phone:"",client_address:"",service_description:"",amount:"",due_date:"",notes:""}),i=e=>{l(s=>({...s,[e.target.name]:e.target.value}))};return H.jsxs("div",{className:"space-y-6",children:[H.jsxs("div",{className:"flex items-center",children:[H.jsx("button",{onClick:()=>s("/invoices"),className:"mr-4 p-2 text-gray-400 hover:text-gray-500",children:H.jsx(q,{className:"h-5 w-5"})}),H.jsxs("div",{children:[H.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Invoice"}),H.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Fill out the details below to create a new invoice."})]})]}),H.jsxs("form",{onSubmit:async e=>{e.preventDefault(),a(!0);try{const{data:e,error:t}=await K.from("invoices").insert([{client_name:r.client_name,client_email:r.client_email,client_phone:r.client_phone,client_address:r.client_address,service_description:r.service_description,amount:parseFloat(r.amount),due_date:r.due_date||null,notes:r.notes,status:"pending"}]).select().single();if(t)throw t;s(`/invoices/${e.id}`)}catch(t){console.error("Error creating invoice:",t),alert("Failed to create invoice. Please try again.")}finally{a(!1)}},className:"space-y-6",children:[H.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[H.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Client Information"}),H.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Name *"}),H.jsx("input",{type:"text",name:"client_name",value:r.client_name,onChange:i,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),H.jsx("input",{type:"email",name:"client_email",value:r.client_email,onChange:i,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),H.jsx("input",{type:"tel",name:"client_phone",value:r.client_phone,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),H.jsx("input",{type:"text",name:"client_address",value:r.client_address,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),H.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[H.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Invoice Details"}),H.jsxs("div",{className:"space-y-6",children:[H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Description *"}),H.jsx("textarea",{name:"service_description",value:r.service_description,onChange:i,required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe the services provided..."})]}),H.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount *"}),H.jsxs("div",{className:"relative",children:[H.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),H.jsx("input",{type:"number",name:"amount",value:r.amount,onChange:i,required:!0,min:"0",step:"0.01",className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),H.jsx("input",{type:"date",name:"due_date",value:r.due_date,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Notes"}),H.jsx("textarea",{name:"notes",value:r.notes,onChange:i,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Payment terms, additional information..."})]})]})]}),H.jsxs("div",{className:"flex justify-end space-x-3",children:[H.jsx("button",{type:"button",onClick:()=>s("/invoices"),className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),H.jsxs("button",{type:"submit",disabled:t,className:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-lg text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50",children:[H.jsx(S,{className:"mr-2 h-4 w-4"}),t?"Creating...":"Create Invoice"]})]})]})]})}function de(){const s=n(),{id:t}=i(),[a,r]=e.useState(!1),[l,d]=e.useState(!0),[c,o]=e.useState({client_name:"",client_email:"",client_phone:"",client_address:"",service_description:"",amount:"",due_date:"",notes:""});e.useEffect(()=>{t&&m()},[t]);const m=async()=>{var e;try{const{data:s,error:a}=await K.from("invoices").select("*").eq("id",t).single();if(a)throw a;o({client_name:s.client_name||"",client_email:s.client_email||"",client_phone:s.client_phone||"",client_address:s.client_address||"",service_description:s.service_description||"",amount:(null==(e=s.amount)?void 0:e.toString())||"",due_date:s.due_date||"",notes:s.notes||""})}catch(a){console.error("Error loading invoice:",a),s("/invoices")}finally{d(!1)}},x=e=>{o(s=>({...s,[e.target.name]:e.target.value}))};return l?H.jsxs("div",{className:"animate-pulse",children:[H.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),H.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:H.jsx("div",{className:"space-y-4",children:[...Array(6)].map((e,s)=>H.jsxs("div",{children:[H.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),H.jsx("div",{className:"h-10 bg-gray-200 rounded"})]},s))})})]}):H.jsxs("div",{className:"space-y-6",children:[H.jsxs("div",{className:"flex items-center",children:[H.jsx("button",{onClick:()=>s(`/invoices/${t}`),className:"mr-4 p-2 text-gray-400 hover:text-gray-500",children:H.jsx(q,{className:"h-5 w-5"})}),H.jsxs("div",{children:[H.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Invoice"}),H.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Update the invoice details below."})]})]}),H.jsxs("form",{onSubmit:async e=>{e.preventDefault(),r(!0);try{const{error:e}=await K.from("invoices").update({client_name:c.client_name,client_email:c.client_email,client_phone:c.client_phone,client_address:c.client_address,service_description:c.service_description,amount:parseFloat(c.amount),due_date:c.due_date||null,notes:c.notes}).eq("id",t);if(e)throw e;s(`/invoices/${t}`)}catch(a){console.error("Error updating invoice:",a),alert("Failed to update invoice. Please try again.")}finally{r(!1)}},className:"space-y-6",children:[H.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[H.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Client Information"}),H.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Name *"}),H.jsx("input",{type:"text",name:"client_name",value:c.client_name,onChange:x,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),H.jsx("input",{type:"email",name:"client_email",value:c.client_email,onChange:x,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),H.jsx("input",{type:"tel",name:"client_phone",value:c.client_phone,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),H.jsx("input",{type:"text",name:"client_address",value:c.client_address,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),H.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[H.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Invoice Details"}),H.jsxs("div",{className:"space-y-6",children:[H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Description *"}),H.jsx("textarea",{name:"service_description",value:c.service_description,onChange:x,required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe the services provided..."})]}),H.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount *"}),H.jsxs("div",{className:"relative",children:[H.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),H.jsx("input",{type:"number",name:"amount",value:c.amount,onChange:x,required:!0,min:"0",step:"0.01",className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),H.jsx("input",{type:"date",name:"due_date",value:c.due_date,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Notes"}),H.jsx("textarea",{name:"notes",value:c.notes,onChange:x,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Payment terms, additional information..."})]})]})]}),H.jsxs("div",{className:"flex justify-end space-x-3",children:[H.jsx("button",{type:"button",onClick:()=>s(`/invoices/${t}`),className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),H.jsxs("button",{type:"submit",disabled:a,className:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-lg text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50",children:[H.jsx(S,{className:"mr-2 h-4 w-4"}),a?"Saving...":"Save Changes"]})]})]})]})}function ce(){const s=n(),{id:t}=i(),[a,l]=e.useState(null),[d,c]=e.useState(!0);e.useEffect(()=>{t&&o()},[t]);const o=async()=>{try{const{data:e,error:s}=await K.from("invoices").select("*").eq("id",t).single();if(s)throw s;l(e)}catch(e){console.error("Error loading invoice:",e),s("/invoices")}finally{c(!1)}};return d?H.jsxs("div",{className:"animate-pulse",children:[H.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),H.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:H.jsx("div",{className:"space-y-4",children:[...Array(8)].map((e,s)=>H.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"},s))})})]}):a?H.jsxs("div",{className:"space-y-6",children:[H.jsxs("div",{className:"flex items-center justify-between",children:[H.jsxs("div",{className:"flex items-center",children:[H.jsx("button",{onClick:()=>s("/invoices"),className:"mr-4 p-2 text-gray-400 hover:text-gray-500",children:H.jsx(q,{className:"h-5 w-5"})}),H.jsxs("div",{children:[H.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Invoice Details"}),H.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Created ",v(new Date(a.created_at),"MMMM d, yyyy")]})]})]}),H.jsxs("div",{className:"flex items-center space-x-3",children:[H.jsx("span",{className:"inline-flex items-center rounded-full px-3 py-1 text-sm font-medium "+("paid"===a.status?"bg-green-100 text-green-800":"overdue"===a.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:a.status}),H.jsxs(r,{to:`/invoices/${a.id}/edit`,className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50",children:[H.jsx(_,{className:"mr-2 h-4 w-4"}),"Edit"]}),H.jsxs("button",{onClick:async()=>{if(!a)return;const e=`${window.location.origin}/invoice/${a.id}`;try{await navigator.clipboard.writeText(e),alert("Invoice link copied to clipboard!")}catch(s){prompt("Copy this link:",e)}},className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50",children:[H.jsx(k,{className:"mr-2 h-4 w-4"}),"Share"]}),"paid"!==a.status&&H.jsxs("button",{onClick:async()=>{if(a)try{const{error:e}=await K.from("invoices").update({status:"paid"}).eq("id",a.id);if(e)throw e;l({...a,status:"paid"})}catch(e){console.error("Error updating invoice status:",e),alert("Failed to update invoice status. Please try again.")}},className:"inline-flex items-center px-3 py-2 bg-green-600 border border-transparent rounded-lg text-sm font-medium text-white hover:bg-green-700",children:[H.jsx(M,{className:"mr-2 h-4 w-4"}),"Mark as Paid"]})]})]}),H.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[H.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:H.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Invoice Information"})}),H.jsxs("div",{className:"px-6 py-4 space-y-6",children:[H.jsxs("div",{children:[H.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3",children:"Bill To"}),H.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[H.jsxs("div",{children:[H.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Name"}),H.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:a.client_name})]}),H.jsxs("div",{children:[H.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Email"}),H.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:a.client_email})]}),a.client_phone&&H.jsxs("div",{children:[H.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Phone"}),H.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:a.client_phone})]}),a.client_address&&H.jsxs("div",{children:[H.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Address"}),H.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:a.client_address})]})]})]}),H.jsxs("div",{children:[H.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3",children:"Service Details"}),H.jsxs("div",{className:"space-y-4",children:[H.jsxs("div",{children:[H.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Description"}),H.jsx("dd",{className:"mt-1 text-sm text-gray-900 whitespace-pre-wrap",children:a.service_description})]}),H.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[H.jsxs("div",{children:[H.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Amount"}),H.jsxs("dd",{className:"mt-1 text-2xl font-bold text-gray-900",children:["$",a.amount.toLocaleString()]})]}),a.due_date&&H.jsxs("div",{children:[H.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Due Date"}),H.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:v(new Date(a.due_date),"MMMM d, yyyy")})]})]}),a.notes&&H.jsxs("div",{children:[H.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Additional Notes"}),H.jsx("dd",{className:"mt-1 text-sm text-gray-900 whitespace-pre-wrap",children:a.notes})]})]})]})]})]})]}):H.jsxs("div",{className:"text-center py-12",children:[H.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Invoice not found"}),H.jsx("p",{className:"mt-2 text-gray-600",children:"The invoice you're looking for doesn't exist."}),H.jsx(r,{to:"/invoices",className:"mt-4 inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Back to Invoices"})]})}function oe(){const{id:s}=i(),[t,a]=e.useState(null),[r,l]=e.useState(!0),[n,d]=e.useState(!1);e.useEffect(()=>{s&&c()},[s]);const c=async()=>{try{const{data:e,error:t}=await K.from("invoices").select("*").eq("id",s).single();if(t)throw t;a(e)}catch(e){console.error("Error loading invoice:",e)}finally{l(!1)}};return r?H.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:H.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):t?H.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:H.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[H.jsxs("div",{className:"text-center mb-8",children:[H.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Invoice"}),H.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Invoice Date: ",v(new Date(t.created_at),"MMMM d, yyyy")]})]}),H.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:["paid"===t.status&&H.jsx("div",{className:"bg-green-50 border-b border-green-200 px-6 py-3",children:H.jsxs("div",{className:"flex items-center",children:[H.jsx(I,{className:"h-5 w-5 text-green-600 mr-2"}),H.jsx("span",{className:"text-sm font-medium text-green-800",children:"This invoice has been paid"})]})}),H.jsxs("div",{className:"px-6 py-8",children:[H.jsxs("div",{className:"mb-8",children:[H.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Bill To:"}),H.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:H.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[H.jsxs("div",{children:[H.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Name:"}),H.jsx("p",{className:"text-sm text-gray-900",children:t.client_name})]}),H.jsxs("div",{children:[H.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Email:"}),H.jsx("p",{className:"text-sm text-gray-900",children:t.client_email})]}),t.client_phone&&H.jsxs("div",{children:[H.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Phone:"}),H.jsx("p",{className:"text-sm text-gray-900",children:t.client_phone})]}),t.client_address&&H.jsxs("div",{children:[H.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Address:"}),H.jsx("p",{className:"text-sm text-gray-900",children:t.client_address})]})]})})]}),H.jsxs("div",{className:"mb-8",children:[H.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Service Description:"}),H.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:H.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:t.service_description})})]}),H.jsx("div",{className:"mb-8",children:H.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 text-center",children:[H.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Total Amount:"}),H.jsxs("p",{className:"text-4xl font-bold text-blue-600",children:["$",t.amount.toLocaleString()]}),t.due_date&&H.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Due: ",v(new Date(t.due_date),"MMMM d, yyyy")]})]})}),t.notes&&H.jsxs("div",{className:"mb-8",children:[H.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Notes:"}),H.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:H.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:t.notes})})]}),"paid"!==t.status&&H.jsxs("div",{className:"text-center",children:[H.jsxs("button",{onClick:async()=>{if(t){d(!0);try{await new Promise(e=>setTimeout(e,2e3));const{error:e}=await K.from("invoices").update({status:"paid"}).eq("id",t.id);if(e)throw e;a({...t,status:"paid"})}catch(e){console.error("Error processing payment:",e),alert("Payment failed. Please try again.")}finally{d(!1)}}},disabled:n,className:"inline-flex items-center px-8 py-4 bg-blue-600 border border-transparent rounded-lg text-lg font-medium text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[H.jsx(M,{className:"mr-3 h-6 w-6"}),n?"Processing Payment...":"Pay Now"]}),H.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"Secure payment processing powered by Stripe"})]})]})]}),H.jsx("div",{className:"mt-8 text-center text-sm text-gray-500",children:H.jsx("p",{children:"Powered by QuickQuote"})})]})}):H.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:H.jsxs("div",{className:"text-center",children:[H.jsx(h,{className:"mx-auto h-12 w-12 text-gray-400"}),H.jsx("h2",{className:"mt-2 text-lg font-medium text-gray-900",children:"Invoice not found"}),H.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"The invoice you're looking for doesn't exist or has been removed."})]})})}function me(){const[s,t]=e.useState([]),[a,r]=e.useState(!0),[l,n]=e.useState("");e.useEffect(()=>{i()},[]);const i=async()=>{try{const[e,s]=await Promise.all([K.from("quotes").select("client_name, client_email, client_phone, client_address, amount, status"),K.from("invoices").select("client_name, client_email, client_phone, client_address, amount, status")]),a=e.data||[],r=s.data||[],l=new Map;a.forEach(e=>{const s=`${e.client_name}-${e.client_email}`;l.has(s)||l.set(s,{id:s,name:e.client_name,email:e.client_email,phone:e.client_phone,address:e.client_address,total_quotes:0,total_invoices:0,total_revenue:0});l.get(s).total_quotes++}),r.forEach(e=>{const s=`${e.client_name}-${e.client_email}`;l.has(s)||l.set(s,{id:s,name:e.client_name,email:e.client_email,phone:e.client_phone,address:e.client_address,total_quotes:0,total_invoices:0,total_revenue:0});const t=l.get(s);t.total_invoices++,"paid"===e.status&&(t.total_revenue+=e.amount||0)}),t(Array.from(l.values()))}catch(e){console.error("Error loading clients:",e)}finally{r(!1)}},d=s.filter(e=>e.name.toLowerCase().includes(l.toLowerCase())||e.email.toLowerCase().includes(l.toLowerCase()));return a?H.jsxs("div",{className:"animate-pulse",children:[H.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),H.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[...Array(6)].map((e,s)=>H.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[H.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),H.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]},s))})]}):H.jsxs("div",{className:"space-y-6",children:[H.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:H.jsxs("div",{children:[H.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Clients"}),H.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your client relationships and track their activity."})]})}),H.jsxs("div",{className:"relative",children:[H.jsx(N,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),H.jsx("input",{type:"text",placeholder:"Search clients...",value:l,onChange:e=>n(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),0===d.length?H.jsxs("div",{className:"text-center py-12",children:[H.jsx("div",{className:"mx-auto h-12 w-12 text-gray-400",children:H.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),H.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No clients found"}),H.jsx("p",{className:"mt-1 text-sm text-gray-500",children:l?"Try adjusting your search criteria.":"Clients will appear here once you create quotes or invoices."})]}):H.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:d.map(e=>H.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[H.jsx("div",{className:"flex items-center justify-between mb-4",children:H.jsx("h3",{className:"text-lg font-medium text-gray-900 truncate",children:e.name})}),H.jsxs("div",{className:"space-y-3",children:[H.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[H.jsx(E,{className:"h-4 w-4 mr-2 flex-shrink-0"}),H.jsx("span",{className:"truncate",children:e.email})]}),e.phone&&H.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[H.jsx(A,{className:"h-4 w-4 mr-2 flex-shrink-0"}),H.jsx("span",{children:e.phone})]}),e.address&&H.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[H.jsx(P,{className:"h-4 w-4 mr-2 flex-shrink-0"}),H.jsx("span",{className:"truncate",children:e.address})]})]}),H.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:H.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[H.jsxs("div",{children:[H.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.total_quotes}),H.jsx("p",{className:"text-xs text-gray-500",children:"Quotes"})]}),H.jsxs("div",{children:[H.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.total_invoices}),H.jsx("p",{className:"text-xs text-gray-500",children:"Invoices"})]}),H.jsxs("div",{children:[H.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",e.total_revenue.toLocaleString()]}),H.jsx("p",{className:"text-xs text-gray-500",children:"Revenue"})]})]})})]},e.id))})]})}function xe(){const[s,t]=e.useState("profile"),[a,r]=e.useState(!1),l=[{id:"profile",name:"Profile",icon:Q},{id:"business",name:"Business",icon:$},{id:"billing",name:"Billing",icon:M},{id:"notifications",name:"Notifications",icon:L}];return H.jsxs("div",{className:"space-y-6",children:[H.jsxs("div",{children:[H.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),H.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your account settings and preferences."})]}),H.jsxs("div",{className:"flex flex-col lg:flex-row lg:space-x-8",children:[H.jsx("div",{className:"lg:w-64",children:H.jsx("nav",{className:"space-y-1",children:l.map(e=>H.jsxs("button",{onClick:()=>t(e.id),className:"w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg "+(s===e.id?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50"),children:[H.jsx(e.icon,{className:"mr-3 h-5 w-5"}),e.name]},e.id))})}),H.jsx("div",{className:"flex-1 mt-6 lg:mt-0",children:H.jsxs("div",{className:"bg-white rounded-lg shadow",children:["profile"===s&&H.jsxs("div",{className:"p-6",children:[H.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Profile Information"}),H.jsxs("div",{className:"space-y-6",children:[H.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),H.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"John"})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),H.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Doe"})]})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),H.jsx("input",{type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"john@example.com"})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),H.jsx("input",{type:"tel",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+1 (555) 123-4567"})]})]})]}),"business"===s&&H.jsxs("div",{className:"p-6",children:[H.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Business Information"}),H.jsxs("div",{className:"space-y-6",children:[H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name"}),H.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Your Business Name"})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Address"}),H.jsx("textarea",{rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"123 Business St, City, State 12345"})]}),H.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax ID / EIN"}),H.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"12-3456789"})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),H.jsx("input",{type:"url",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://yourbusiness.com"})]})]})]})]}),"billing"===s&&H.jsxs("div",{className:"p-6",children:[H.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Billing & Payments"}),H.jsxs("div",{className:"space-y-6",children:[H.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:H.jsxs("div",{className:"flex",children:[H.jsx("div",{className:"flex-shrink-0",children:H.jsx(M,{className:"h-5 w-5 text-blue-400"})}),H.jsxs("div",{className:"ml-3",children:[H.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Stripe Integration"}),H.jsx("div",{className:"mt-2 text-sm text-blue-700",children:H.jsx("p",{children:"Connect your Stripe account to accept payments directly through your invoices."})}),H.jsx("div",{className:"mt-4",children:H.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700",children:"Connect Stripe Account"})})]})]})}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Payment Terms"}),H.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[H.jsx("option",{children:"Net 15"}),H.jsx("option",{children:"Net 30"}),H.jsx("option",{children:"Net 45"}),H.jsx("option",{children:"Net 60"}),H.jsx("option",{children:"Due on Receipt"})]})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Late Fee Percentage"}),H.jsxs("div",{className:"relative",children:[H.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",className:"w-full px-3 py-2 pr-8 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"1.5"}),H.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:"%"})]})]})]})]}),"notifications"===s&&H.jsxs("div",{className:"p-6",children:[H.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Notification Preferences"}),H.jsx("div",{className:"space-y-6",children:H.jsxs("div",{className:"space-y-4",children:[H.jsxs("div",{className:"flex items-center justify-between",children:[H.jsxs("div",{children:[H.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Quote Responses"}),H.jsx("p",{className:"text-sm text-gray-500",children:"Get notified when clients respond to quotes"})]}),H.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[H.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),H.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),H.jsxs("div",{className:"flex items-center justify-between",children:[H.jsxs("div",{children:[H.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Payment Confirmations"}),H.jsx("p",{className:"text-sm text-gray-500",children:"Get notified when invoices are paid"})]}),H.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[H.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),H.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),H.jsxs("div",{className:"flex items-center justify-between",children:[H.jsxs("div",{children:[H.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Overdue Reminders"}),H.jsx("p",{className:"text-sm text-gray-500",children:"Get reminded about overdue invoices"})]}),H.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[H.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),H.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),H.jsxs("div",{className:"flex items-center justify-between",children:[H.jsxs("div",{children:[H.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Weekly Reports"}),H.jsx("p",{className:"text-sm text-gray-500",children:"Receive weekly business summary reports"})]}),H.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[H.jsx("input",{type:"checkbox",className:"sr-only peer"}),H.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})})]}),H.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-lg",children:H.jsx("div",{className:"flex justify-end",children:H.jsxs("button",{onClick:async()=>{r(!0),await new Promise(e=>setTimeout(e,1e3)),r(!1),alert("Settings saved successfully!")},disabled:a,className:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-lg text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50",children:[H.jsx(S,{className:"mr-2 h-4 w-4"}),a?"Saving...":"Save Changes"]})})})]})})]})]})}function ue(){return H.jsxs(d,{children:[H.jsx(c,{path:"/quote/:id",element:H.jsx(le,{})}),H.jsx(c,{path:"/invoice/:id",element:H.jsx(oe,{})}),H.jsxs(c,{path:"/",element:H.jsx(X,{}),children:[H.jsx(c,{index:!0,element:H.jsx(ee,{})}),H.jsx(c,{path:"quotes",element:H.jsx(se,{})}),H.jsx(c,{path:"quotes/new",element:H.jsx(te,{})}),H.jsx(c,{path:"quotes/:id/edit",element:H.jsx(ae,{})}),H.jsx(c,{path:"quotes/:id",element:H.jsx(re,{})}),H.jsx(c,{path:"invoices",element:H.jsx(ne,{})}),H.jsx(c,{path:"invoices/new",element:H.jsx(ie,{})}),H.jsx(c,{path:"invoices/:id/edit",element:H.jsx(de,{})}),H.jsx(c,{path:"invoices/:id",element:H.jsx(ce,{})}),H.jsx(c,{path:"clients",element:H.jsx(me,{})}),H.jsx(c,{path:"settings",element:H.jsx(xe,{})})]})]})}U.createRoot(document.getElementById("root")).render(H.jsx(t.StrictMode,{children:H.jsx(o,{children:H.jsx(ue,{})})}));
